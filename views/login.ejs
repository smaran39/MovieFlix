<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>
    <title>Login</title>
  </head>
  <body>

    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">MovieFlix</a>
        </div>
        <ul class="nav navbar-nav">
          <li class="active"><a href="/">Home</a></li>
          <li><a href="/login">Sign In</a></li>
          <li><a href="/signup">Sign Up</a></li>

        </ul>
      </div>
    </nav>
<div ng-app="app">
  <div ng-controller="ctrl">
    <div class='container'>
<div class="row">
  <div class="col-md-4">
</div>
  <div class="col-md-4">
<br><br>
<div class="form-group">
<label for="username">Username</label>
<input type="text" id="username" ng-model="username"class="form-control" placeholder="Username" >
<br>
<label for="password">Password</label>
<input type="password" id="password" ng-model="password" class="form-control" placeholder="password">
<br>
<button ng-click="login(username,password)" class=" btn btn-success btn-md">Login</button>
</div>
</div>
  <div class="col-md-4">

  </div>
</div>
    </div>
  </div>
  </div>
  </body>

  <script>
var app=angular.module("app",[]);
app.controller('ctrl', function($scope,$http,$window) {
$scope.name="smaran";
$scope.login=function(username,password){
  if(username==undefined||password==undefined){
    alert(" no login");
  }
  else{


    $http.post('/access',JSON.stringify({username:username,password:password}))
       .then(
           function(response){
             // success callback
             //console.log(response);
             if(response.data.msg=="success"){
              $window.location.href = '/';
             }
             else{
               $scope.username="";
               $scope.password="";
               alert(" login failure");
             }
           },
           function(response){
             // failure callback
           }
        );
  }
}
});

  </script>
</html>
